// Editions version of proto3 file
edition = "2023";
package io.clbs.openhes.models.common;

option go_package = "github.com/cybroslabs/ouro-api-shared/gen/go/common";

import "google/protobuf/struct.proto";
import "common/fields.proto";
import "common/objects.proto";

// Defines a specification for metadata fields managed by both users and the system.
message MetadataFields {
    string id                              = 1;  // The UUID of the resource. Serves as the unique identifier of the resource. Immutable and typically auto-generated during `Create` operations.
    int32 generation                       = 2;  // The resource generation.
    map<string, FieldValue> fields         = 3;  // Additional fields managed by the user.
    map<string, FieldValue> managed_fields = 4;  // Additional fields managed by the system.
    string name                            = 5;  // The resource name. Mutable and typically set by the user. Must be set.
}

// Defines a specification for updating metadata.
message UpdateMetadata {
    reserved 1, 2;
    MetadataFields metadata = 3;  // The metadata fields of the resource.
}

// Defines a specification for updating object fields.
message UpdateObjectFieldsRequest {
    reserved 2, 3;
    SetFieldsSpec spec = 1;  // The specification of the fields to set for the resources.
}

// Defines a specification for creating or updating fields for resources.
message SetFieldsSpec {
    map<string, common.FieldValue> fields = 1;  // The fields to set for the resources.
    ObjectType object_type                = 2;  // The type of the managed fields update. Defines resource type the fields apply to.
    string object_id                      = 3;  // The UUID of the resource. Serves as the unique identifier of the resource. Immutable and typically auto-generated during `Create` operations.
}